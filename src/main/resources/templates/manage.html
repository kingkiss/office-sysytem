<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OFFICE 云物品</title>

    <link rel="stylesheet" href="my/bootstrap.min.css">
    <link rel="stylesheet" href="my/mystyle.css">
    <script src="my/jquery-3.1.1.min.js"></script>
    <script src="my/vue.js"></script>
    <script src="my/bootstrap.min.js"></script>
    <script src="my/axios.min.js"></script>
    <!---<link rel="shortcut icon" href="pic/officeicon.ico">  -->
</head>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="row">
        <div class="col-md-10">
            <p class="navbar-text" style="font-family: Microsoft YaHei;font-size: 18px">OFFICE 云管理</p>
        </div>
        <div id="user" class="col-md-2" style="padding-top: 4.5px">
            <div class="btn-group">
                <img src="pic/user_icon.png" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <p class="navbar-text" style="font-family: Microsoft YaHei;font-size: 15px">{{ user_truename }}</p>
                <ul class="dropdown-menu">
                    <li><img src="pic/user2_icon.png"></li>
                    <li style="color: #8a8a8a">{{ user_truename }}</li>
                    <li style="color: #8a8a8a">{{ user_name }}</li>
                    <li role="separator" class="divider"></li>
                    <li><a data-toggle="modal" data-target="#userInfo">个人详情</a></li>
                    <li><a href="http://localhost:8080/loginout">注销</a></li>
                </ul>
            </div>

        </div>
    </div>
</nav>

<body style="padding-top: 55px;">
<div id="fun_show" class="left-nav">
    <div class="list-group">
        <a href="#" class="list-group-item list-item-active">物品分类</a>
        <a href="#" class="list-group-item" v-if="user_authority >= 3">管理物品</a>
        <a href="#" class="list-group-item" v-if="user_authority >= 7">用户管理</a>
        <a href="#" class="list-group-item" v-if="user_authority >= 3">申请审核</a>
        <a href="#" class="list-group-item">申请记录</a>
        <a href="#" class="list-group-item">借入记录</a>
        <a href="#" class="list-group-item">归还记录</a>
        <a href="#" class="list-group-item">使用统计</a>

    </div>
</div>
<div class="rigth-nav">
    <div class="container">
        <div class="panel panel-default">
            <div class="panel-heading">用户管理</div>
            <div class="panel-body">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th>序号</th>
                        <th>姓名</th>
                        <th>部门</th>
                        <th>邮箱</th>
                        <th>电话</th>
                        <th>职能</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <th scope="row">1</th>
                        <td>Mark</td>
                        <td>PC企业</td>
                        <td>mark@office.com</td>
                        <td>1324566666</td>
                        <td>员工</td>
                    </tr>
                    <tr>
                        <th scope="row">2</th>
                        <td>Jacob</td>
                        <td>PC企业</td>
                        <td>jacob@office.com</td>
                        <td>1324566666</td>
                        <td>员工</td>
                    </tr>
                    <tr>
                        <th scope="row">3</th>
                        <td>Larry</td>
                        <td>PC企业</td>
                        <td>larry@office.com</td>
                        <td>1324566666</td>
                        <td>财务</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<!-- 个人信息Modal框   用户个人信息查看和修改-->
<div class="modal fade" id="userInfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
          <div class="row">
              <div class="col-md-12" style="text-align: center">
                  <img src="pic/user2_icon.png">
              </div>
          <div class="row">
              <div class="col-md-12" style="text-align: center">
                  <p style="font-family: Microsoft YaHei;font-size: 15px">admin</p>
              </div>
          </div>
          </div>
      </div>
      <div class="modal-body">
        <p>姓名：{{ user_truename }}</p>
        <p>电话：{{ user_phone }}</p>
        <p>邮箱：{{ user_name }}}</p> <!-- user_name就是用户登录用的邮箱，这个命名有点不恰当，但是因为历史原因改起来好麻烦就不改了 T_T -->
        <p>所属部门：{{ user_department }}</p>
        <p>职能：{{ user_authority }}</p> <!-- 也就是用户的权限 -->
      </div>
      <div class="modal-body">
      <p>安全设置</p>
      </div>
      <div class="modal-footer" style="text-align: center">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary">保存</button>
      </div>
    </div>
  </div>
</div>


</body>
<script>
    $('.list-group-item').click(function () {
        $(this).siblings('.list-group-item').removeClass('list-item-active');
        $(this).addClass('list-item-active');
    })
/* 用户信息数据 */
    var userdata = {
        user_name:'',
        user_truename:'',
        user_department:'',
        user_authority:'',
        show_7:false,
        show_3:false,
    }
/* vue获取数据 */
    var user_Info = new Vue({
        el:'#user',
        data:userdata,
        created:function(){
            var url = "http://localhost:8080/userInfo";
            var self = this;
            axios.get(url).then(function(response){
                var result = response.data;
                self.user_truename = result.user_truename;
                self.user_name = result.user_name;
                self.user_department = result.user_department;
                self.user_authority = result.user_authority;
            })
            
/*             if(self.user_authority >= 3){
                self.show_3 = true;
                if(self.user_authority >= 7){
                  self.show_7 = true;
                }
            } */
            
        },
        methods:{
            userLoginout:function(){
                axios.get("http://localhost:8080/loginout").then()
            }
        },
    })
    
 /* 左侧功能栏根据用户权限显示相对应的功能模块 */
    var modalShow = new Vue({
        el:'#fun_show',
        data:userdata,
        
    })
    
</script>
</html>